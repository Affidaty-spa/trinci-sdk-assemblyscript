<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1107px" preserveAspectRatio="none" style="width:739px;height:1107px;background:#FFFFFF;" version="1.1" viewBox="0 0 739 1107" width="739px" zoomAndPan="magnify"><defs/><g><rect fill="#DDDDDD" height="1095.375" style="stroke:#181818;stroke-width:0.5;" width="336" x="329.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="111" x="442" y="18.0669">Wasm Machine</text><rect fill="#FFBBBB" height="136.7969" style="stroke:#181818;stroke-width:1.0;" width="10" x="617.5" y="622.8203"/><rect fill="none" height="134.7969" style="stroke:#000000;stroke-width:1.5;" width="583" x="88.5" y="242.9609"/><rect fill="none" height="134.7969" style="stroke:#000000;stroke-width:1.5;" width="583" x="88.5" y="416.7578"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="23" x2="23" y1="87.4297" y2="1022.0781"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="122.5" x2="122.5" y1="87.4297" y2="1022.0781"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="365.5" x2="365.5" y1="87.4297" y2="1022.0781"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="622.5" x2="622.5" y1="87.4297" y2="1022.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="84.1279">User</text><ellipse cx="23.5" cy="19.6328" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.5,27.6328 L23.5,54.6328 M10.5,35.6328 L36.5,35.6328 M23.5,54.6328 L10.5,69.6328 M23.5,54.6328 L36.5,69.6328 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="1034.0732">User</text><ellipse cx="23.5" cy="1045.875" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.5,1053.875 L23.5,1080.875 M10.5,1061.875 L36.5,1061.875 M23.5,1080.875 L10.5,1095.875 M23.5,1080.875 L36.5,1095.875 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="48" x="98.5" y="56.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34" x="105.5" y="76.1279">Core</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="48" x="98.5" y="1021.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34" x="105.5" y="1041.0732">Core</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="333.5" y="84.1279">Memory</text><path d="M347.5,35.1328 C347.5,25.1328 365.5,25.1328 365.5,25.1328 C365.5,25.1328 383.5,25.1328 383.5,35.1328 L383.5,61.1328 C383.5,71.1328 365.5,71.1328 365.5,71.1328 C365.5,71.1328 347.5,71.1328 347.5,61.1328 L347.5,35.1328 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M347.5,35.1328 C347.5,45.1328 365.5,45.1328 365.5,45.1328 C365.5,45.1328 383.5,45.1328 383.5,35.1328 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="333.5" y="1034.0732">Memory</text><path d="M347.5,1047.375 C347.5,1037.375 365.5,1037.375 365.5,1037.375 C365.5,1037.375 383.5,1037.375 383.5,1047.375 L383.5,1073.375 C383.5,1083.375 365.5,1083.375 365.5,1083.375 C365.5,1083.375 347.5,1083.375 347.5,1073.375 L347.5,1047.375 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M347.5,1047.375 C347.5,1057.375 365.5,1057.375 365.5,1057.375 C365.5,1057.375 383.5,1057.375 383.5,1047.375 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="583.5" y="56.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="590.5" y="76.1279">Contract</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="583.5" y="1021.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="590.5" y="1041.0732">Contract</text><rect fill="#FFBBBB" height="136.7969" style="stroke:#181818;stroke-width:1.0;" width="10" x="617.5" y="622.8203"/><polygon fill="#181818" points="110.5,114.5625,120.5,118.5625,110.5,122.5625,114.5,118.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="23.5" x2="116.5" y1="118.5625" y2="118.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="30.5" y="113.4966">Transaction</text><polygon fill="#FEFFDD" points="50,131.5625,195,131.5625,205,142.5625,195,154.5625,50,154.5625,40,142.5625,50,131.5625" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="52" y="147.6294">Transaction validation</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="732" x="0" y="180.2617"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="732" y1="180.2617" y2="180.2617"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="732" y1="183.2617" y2="183.2617"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="208" x="262" y="169.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="189" x="268" y="185.7622">Initial service operations</text><polygon fill="#FEFFDD" points="37,207.8281,207,207.8281,217,218.8281,207,230.8281,37,230.8281,27,218.8281,37,207.8281" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="39" y="223.895">ctx creation and encoding</text><path d="M88.5,242.9609 L164.5,242.9609 L164.5,250.0938 L154.5,260.0938 L88.5,260.0938 L88.5,242.9609 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="134.7969" style="stroke:#000000;stroke-width:1.5;" width="583" x="88.5" y="242.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="103.5" y="256.0278">CTX</text><polygon fill="#181818" points="610.5,277.2266,620.5,281.2266,610.5,285.2266,614.5,281.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="122.5" x2="616.5" y1="281.2266" y2="281.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="129.5" y="276.1606">alloc(bytes) for CTX</text><polygon fill="#181818" points="133.5,306.3594,123.5,310.3594,133.5,314.3594,129.5,310.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="127.5" x2="621.5" y1="310.3594" y2="310.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="139.5" y="305.2935">memory offset</text><polygon fill="#181818" points="353.5,365.7578,363.5,369.7578,353.5,373.7578,357.5,369.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="122.5" x2="359.5" y1="369.7578" y2="369.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="129.5" y="334.4263">writing CTX bytes to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="129.5" y="349.5591">wasm mem starting from</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38" x="129.5" y="364.6919">offset</text><path d="M88.5,416.7578 L166.5,416.7578 L166.5,423.8906 L156.5,433.8906 L88.5,433.8906 L88.5,416.7578 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="134.7969" style="stroke:#000000;stroke-width:1.5;" width="583" x="88.5" y="416.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="103.5" y="429.8247">args</text><polygon fill="#181818" points="610.5,451.0234,620.5,455.0234,610.5,459.0234,614.5,455.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="122.5" x2="616.5" y1="455.0234" y2="455.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="129.5" y="449.9575">alloc(bytes) for args</text><polygon fill="#181818" points="133.5,480.1563,123.5,484.1563,133.5,488.1563,129.5,484.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="127.5" x2="621.5" y1="484.1563" y2="484.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="139.5" y="479.0903">memory offset</text><polygon fill="#181818" points="353.5,539.5547,363.5,543.5547,353.5,547.5547,357.5,543.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="122.5" x2="359.5" y1="543.5547" y2="543.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="129.5" y="508.2231">writing args bytes to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="129.5" y="523.356">wasm mem starting from</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38" x="129.5" y="538.4888">offset</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="732" x="0" y="579.1211"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="732" y1="579.1211" y2="579.1211"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="732" y1="582.1211" y2="582.1211"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="167" x="282.5" y="568.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="148" x="288.5" y="584.6216">Contract execution</text><polygon fill="#181818" points="605.5,618.8203,615.5,622.8203,605.5,626.8203,609.5,622.8203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="122.5" x2="611.5" y1="622.8203" y2="622.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="283" x="129.5" y="617.7544">run(ctxOffset, ctxSize, argsOffset, argsSize)</text><polygon fill="#181818" points="605.5,647.9531,615.5,651.9531,605.5,655.9531,609.5,651.9531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="365.5" x2="611.5" y1="651.9531" y2="651.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="228" x="372.5" y="646.8872">reading and decoding CTX and args</text><polygon fill="#FEFFDD" points="527,664.9531,717,664.9531,727,698.9531,717,732.9531,527,732.9531,517,698.9531,527,664.9531" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186" x="529" y="681.02">contract code execution with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171" x="529" y="696.1528">potential subsequent calls,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="529" y="711.2856">host functions invocation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="529" y="726.4185">and database changes</text><polygon fill="#181818" points="133.5,755.6172,123.5,759.6172,133.5,763.6172,129.5,759.6172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="127.5" x2="621.5" y1="759.6172" y2="759.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="139.5" y="754.5513">return 64-bit number</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="732" x="0" y="788.1836"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="732" y1="788.1836" y2="788.1836"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="732" y1="791.1836" y2="791.1836"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="226" x="253" y="777.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="207" x="259" y="793.6841">Contract return evaluation</text><polygon fill="#FEFFDD" points="48,815.75,196,815.75,206,841.75,196,868.75,48,868.75,38,841.75,48,815.75" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="50" y="831.8169">split return into</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="50" y="846.9497">two 32-bit numbers</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="50" y="862.0825">(retOffset and retSize)</text><polygon fill="#181818" points="133.5,906.4141,123.5,910.4141,133.5,914.4141,129.5,910.4141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="127.5" x2="364.5" y1="910.4141" y2="910.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="139.5" y="890.2153">reading ret data from wasm mem</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="139.5" y="905.3481">using retOffset and retSize</text><polygon fill="#FEFFDD" points="45,923.4141,200,923.4141,210,964.4141,200,1006.4141,45,1006.4141,35,964.4141,45,923.4141" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="47" y="939.481">decoding obtained data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="47" y="954.6138">if (ret.success)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="63" y="969.7466">apply all db changes</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="47" y="984.8794">else</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="63" y="1000.0122">discard</text><!--SRC=[dLIxZjim4Epv5GjVOmFs5KcG8e1JnC01AGufSa5Ik5bHAvc0H2fy-17uuxDSMO-BYo1HHN9dXwEPbL17vw5_lWKQbXWWyKvrwAFHfaCROUSyJMNDErMuCtp7qC8pweEnf4gCM60GtEAPMkSlYunkgNt5jTWv6ptgk9WOJqoao9R0h2hV3fkFSWryW1UFDZ3SEAiEraK2TsI0Y9ZLu8YDOGqPnao2LDijVBOc6co0IOz6StD7Nb01jjixGXtFe3q90905aTMkDBQUE6llKWUxbnzA1BBGh9w5OjCulImkaS8AAhOsOwIscTwc5MF0LLMWE3BmAN3nv5chhNCZ20z4jxT2aH4XPXkvNddNxksDWuMfw_LwquM-3dyL9g3_KfOx_qqQHp043dGcdSHQjluFaJxP9Rl_HJhNmCklvXUjvSRXCA_pwKhbp8_8qKdtmzFJ9tvKLZ8mPah2KaHpZYNrEOgt-K0ycCKl8wW7fGoccToJYGVLCTRsivIAG3yJxq2pkM6j3Yv4g9BL_MGPUtIwdqMvVFWqz05jJM4QfZw4CGDFCNaBxzzj2XF1fhRW3t7ku0r0FEm91oTBUcN7tL27hZ5Zgx7HgNXoyFRDx9AWbbplVHPxUDSxFKgzcIjAP-OoKDvFaeTX8FOsXLlrdlHEu1YEAoBolwHtJ9aAigh7aBIc45PA_XPTrrpoI4DPJ7usWQHQcg3HbwFgtm00]--></g></svg>